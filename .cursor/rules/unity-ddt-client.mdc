---
description: Unity 弹弹堂类客户端（C#）项目规则
alwaysApply: true
---

# Unity 弹弹堂类客户端项目规则

## 项目定位

- 本项目是 **Unity 客户端**，主要模仿第七大道《弹弹堂》玩法。
- 只负责 **前端 / 客户端逻辑与表现层**，**不实现后端服务或数据库**。
- 主要开发语言为 **C#**，基于 Unity（2D 为主，可带少量 3D 特效）。

## 使用 Cursor 时的通用约定

- **语言**：所有解释性文字与注释优先使用中文，必要时可附英文术语。
- **代码风格（C#）**：
  - 类名、公共方法、公共属性：使用 `PascalCase`（如 `BattleManager`, `PlayerController`）。
  - 私有字段：优先使用前缀 `_camelCase`（如 `_moveSpeed`）。
  - 局部变量与参数：使用 `camelCase`。
  - 常量：使用全大写加下划线（如 `MAX_POWER`, `DEFAULT_GRAVITY`）。
- **命名语义**：命名要体现游戏语义（如 `WindPower`, `ShotAngle`, `LobbyPanel`），避免过度缩写。

## 架构与模块划分（客户端）

- **脚本划分建议**（位于 `Assets/Scripts` 下）：
  - `Common`：工具类、扩展方法、全局常量、通用组件。
  - `GameConfig`：ScriptableObject 配置、数值表加载、客户端常量配置。
  - `Lobby`：大厅相关逻辑，如 `LobbyUI`, `RoomList`, `Matchmaking`。
  - `Battle`：战斗场景逻辑，如 `BattleManager`, `Projectile`, `WindSystem`, `TurnSystem`。
  - `Network`：仅封装客户端网络接口与 DTO，不实现服务端逻辑。
  - `UI`：通用 UI 控件、弹窗系统、提示框等。
- **场景职责清晰**：大厅场景负责匹配与房间管理，战斗场景负责战斗与回合流程。

## Unity 编码习惯

- **生命周期方法**：在 `MonoBehaviour` 中优先使用 `Awake` 初始化引用，`Start` 做依赖其他组件的初始化；`Update` 内逻辑要尽量轻量。
- **解耦**：
  - UI 与战斗逻辑分离，通过事件、消息或中介者模式沟通。
  - 尽量减少单例滥用，仅核心管理器（如 `GameEntry`, `AudioManager`）可以使用单例。
- **配置与常量**：
  - 游戏数值、武器参数、风力范围等，优先使用 ScriptableObject 或配置表，不直接写死在代码中。
  - 重复使用的字符串、层级名、标签名等，集中在常量类中管理。

## 网络与数据约束（前端视角）

- 客户端只负责：
  - 定义与服务器交互的 **数据模型（DTO）**。
  - 发送请求、接收响应，并驱动本地表现。
- 不在客户端实现：
  - 排位算法、物品掉落、充值结算等 **服务端权威逻辑**。
- 需要模拟网络时，优先使用 **本地 Mock / Stub**，并在注释中标注是模拟实现。

## 提示 AI 的行为要求

- 优先提供 **可直接放入 Unity 项目中的 C# 脚本示例**，并说明应放置的目录（如 `Assets/Scripts/Battle`）。
- 对于复杂系统（如回合制战斗、抛物线弹道、风力影响），先给出 **模块划分与流程说明**，再给代码。
- 修改或新增脚本时，尽量保持：
  - 不破坏现有公共接口。
  - 对 Unity 生命周期与场景切换友好。
- 所有回答默认使用 **简体中文**，代码注释也尽量用中文说明关键逻辑。

